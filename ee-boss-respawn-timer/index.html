<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>é‡ç‹é‡ç”Ÿæ™‚é–“è¨ˆç®—å™¨</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background-color: #1e1e2f;
      color: #ffffff;
      font-family: "Microsoft JhengHei", "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    h1 {
      color: #ffcc70;
      margin-top: -15px;
      font-size: 28px;
    }

    label {
      display: block;
      margin: 12px 0 5px;
      font-weight: bold;
      text-align: left;
      width: 100%;
      max-width: 400px;
    }

    .input-group {
      display: flex;
      gap: 10px;
      width: 100%;
      max-width: 400px;
      margin-bottom: 12px;
    }

    input[type="number"], input[type="datetime-local"], select {
      background-color: #2e2e3e;
      color: #ffffff;
      border: 1px solid #555;
      padding: 10px;
      border-radius: 6px;
      width: 100%;
    }

    #bossSelector {
      max-width: 400px;
      margin-bottom: 6px;
    }

    input[type="datetime-local"] {
      max-width: 400px;
      margin-bottom: 6px;
    }

    button {
      margin-top: 10px;
      background: linear-gradient(to right, #ff7e5f, #feb47b);
      color: #1e1e2f;
      padding: 12px 30px;
      font-weight: bold;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px #ffb76b;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 700px;
      margin-top: 30px;
      background-color: #2a2a40;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid #444;
      padding: 12px;
      text-align: center;
    }

    th {
      background-color: #3e3e5e;
      color: #ffcc70;
    }

    tr:nth-child(even) {
      background-color: #24243e;
    }

    tr:nth-child(odd) {
      background-color: #2e2e4e;
    }

    .footer {
      margin-top: 5px;
      font-size: 12px;
    }

    .footer a {
      color: #70d6ff;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    #statusMessage {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      color: #70ff94;
    }


    .button-row {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 20px;
}


.button-row button {
  padding: 12px 30px;
  font-weight: bold;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.button-row button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
}

  </style>
</head>
<body>
  <div class="container">
    <h1>é‡ç‹é‡ç”Ÿæ™‚é–“è¨ˆç®—å™¨</h1>

    <label for="repairTime">ä¼ºæœå™¨é–‹æ©Ÿæ™‚é–“ï¼š</label>
    <input type="datetime-local" id="repairTime" />

    <label for="bossSelector">é¸æ“‡ BOSS ï¼š</label>
    <div class="input-group">
      <select id="bossSelector" onchange="onBossChange()">
        <option value="">-- è«‹é¸æ“‡ BOSS --</option>
      </select>
    </div>

    <div id="manualRespawnInputs" style="display: none;">
      <label>é‡ç”Ÿæœ€çŸ­æ™‚é–“ï¼š</label>
      <div class="input-group">
        <input type="number" id="minRespawnHour" value="" min="0" placeholder="å°æ™‚" />
        <input type="number" id="minRespawnMinute" value="" min="0" max="59" placeholder="åˆ†é˜" />
      </div>

      <label>é‡ç”Ÿæœ€é•·æ™‚é–“ï¼š</label>
      <div class="input-group">
        <input type="number" id="maxRespawnHour" value="" min="0" placeholder="å°æ™‚" />
        <input type="number" id="maxRespawnMinute" value="" min="0" max="59" placeholder="åˆ†é˜" />
      </div>
    </div>

    <div class="button-row">
      <button class="calculate-btn" onclick="calculateRespawn()">è¨ˆç®—BOSSé‡ç”Ÿæ™‚é–“</button>
      <button class="check-btn" onclick="checkCurrentRespawningBosses()">æŸ¥è©¢ç•¶å‰å¯èƒ½é‡ç”Ÿçš„BOSS</button>
    </div>


    <div id="warningMessage" style="margin-top: 10px; max-width: 600px; color: #white; font-weight: bold; font-size: 10px;">
    ğŸ“ä¼ºæœå™¨é–‹æ©Ÿå¾Œçš„å‰å¹¾æ¬¡é ä¼°æ™‚é–“ç›¸å°æº–ç¢ºï¼Œä¹‹å¾Œå¯èƒ½å› åŠ é–‹åˆ†æµæˆ–æ“Šæ®ºæ™‚é–“å»¶é²è€Œæœ‰èª¤å·®ï¼Œè«‹ä»¥å¯¦éš›é‡ç”Ÿæ™‚é–“ç‚ºä¸»ã€‚
    </div>
    <div id="statusMessage"></div>

    <table id="resultTable" style="display: none;">
      <thead id="resultHead"></thead>
      <tbody id="resultBody"></tbody>
    </table>


    <div class="footer">
      ğŸ”æŸ¥è©¢é‡ç‹æ‰è½èˆ‡é€±æœŸè³‡è¨Šè«‹åƒè€ƒï¼š  
      <a href="https://a2983456456.github.io/artale-drop/" target="_blank">
        https://a2983456456.github.io/artale-drop/
      </a>
      <br>
      ğŸ” ç¶­ä¿®é–‹æ©Ÿå…¬å‘Šè«‹åƒè€ƒï¼š  
      <a href="https://discord.com/channels/1364050807544090695/1364210991411232828" target="_blank">
        Artale (ç¹é«”ä¸­æ–‡ç‰ˆ) Discord å…¬å‘Š
      </a>
    </div>
  </div>

  <script>
    const bossList = [
      {
        name: "ğŸ˜ˆç˜‹ç‹‚å–µzå®¢ (2å°æ™‚ ~ 7å°æ™‚)",
        minHour: 2,
        minMinute: 0,
        maxHour: 7,
        maxMinute: 0
      },
      {
        name: "ğŸ¢é»‘è¼ªç‹",
        minHour: 13,
        minMinute: 0,
        maxHour: 17,
        maxMinute: 0
      },
      {
        name: "ğŸªµä»™äººå¨ƒå¨ƒ (2å°æ™‚38åˆ† ~ 3å°æ™‚)",
        minHour: 2,
        minMinute: 38,
        maxHour: 3,
        maxMinute: 0
      },
      {
        name: "ğŸ‘¹å·´æ´›å¤ (6å°æ™‚45åˆ† ~ 9å°æ™‚)",
        minHour: 6,
        minMinute: 45,
        maxHour: 9,
        maxMinute: 0
      },
      {
        name: "ğŸ¦Šä¹å°¾å¦–ç‹ (3å°æ™‚30åˆ† ~ 9å°æ™‚30åˆ†)",
        minHour: 3,
        minMinute: 30,
        maxHour: 9,
        maxMinute: 30
      },
      {
        name: "ğŸ‘»æ›¸ç”Ÿå¹½éˆ (2å°æ™‚30åˆ† ~ 5å°æ™‚)",
        minHour: 2,
        minMinute: 30,
        maxHour: 5,
        maxMinute: 0
      },
      {
        name: "ğŸ„æ®­å±è˜‘è‡ç‹ (3å°æ™‚15åˆ† ~ 3å°æ™‚45åˆ†)",
        minHour: 3,
        minMinute: 15,
        maxHour: 3,
        maxMinute: 45
      },
      {
        name: "ğŸ„è˜‘è‡ç‹ (3å°æ™‚30åˆ† ~ 4å°æ™‚)",
        minHour: 3,
        minMinute: 30,
        maxHour: 4,
        maxMinute: 0
      },
      {
        name: "ğŸ§™â€â™€ï¸é›ªå±±é­”å¥³ (2å°æ™‚38åˆ† ~ 3å°æ™‚)",
        minHour: 2,
        minMinute: 38,
        maxHour: 3,
        maxMinute: 0
      },
      {
        name: "ğŸ¤–è‘›é›·é‡‘å‰› (4å°æ™‚30åˆ† ~ 5å°æ™‚50åˆ†)",
        minHour: 4,
        minMinute: 30,
        maxHour: 5,
        maxMinute: 50
      },
      {
        name: "â›„é›ªæ¯›æ€ªäºº (45åˆ† ~ 1å°æ™‚8åˆ†)",
        minHour: 0,
        minMinute: 45,
        maxHour: 1,
        maxMinute: 8
      },
      {
        name: "ğŸ’€å„é‹æ­»ç¥ (45åˆ† ~ 1å°æ™‚45åˆ†)",
        minHour: 0,
        minMinute: 45,
        maxHour: 1,
        maxMinute: 45
      },
      {
        name: "ğŸ±å–µæ€ªä»™äºº (2å°æ™‚30åˆ† ~ 2å°æ™‚50åˆ†)",
        minHour: 2,
        minMinute: 30,
        maxHour: 2,
        maxMinute: 50
      },
      {
        name: "ğŸ»è‚¯å¾·ç†Š (1å°æ™‚53åˆ† ~ 2å°æ™‚8åˆ†)",
        minHour: 1,
        minMinute: 53,
        maxHour: 2,
        maxMinute: 8
      },
      {
        name: "ğŸ«šå·¨å¤§æ·±å±±äººè”˜ (1å°æ™‚ ~ 2å°æ™‚15åˆ†)",
        minHour: 1,
        minMinute: 0,
        maxHour: 2,
        maxMinute: 15
      }
    ];

      let currentRespawnPage = 1;
  let currentBossPage = 1;
  const rowsPerPage = 20;
  let respawnData = [];
  let currentBossData = [];

    function populateBossOptions() {
      const select = document.getElementById('bossSelector');
      bossList.forEach((boss, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = boss.name;
        select.appendChild(option);
      });
    }

    function onBossChange() {
      const index = document.getElementById('bossSelector').value;
      if (index === "") return;
      const boss = bossList[parseInt(index)];
      document.getElementById('minRespawnHour').value = boss.minHour;
      document.getElementById('minRespawnMinute').value = boss.minMinute;
      document.getElementById('maxRespawnHour').value = boss.maxHour;
      document.getElementById('maxRespawnMinute').value = boss.maxMinute;
    }

    window.addEventListener('DOMContentLoaded', populateBossOptions);

    function calculateRespawn() {
      const repairTimeInput = document.getElementById('repairTime').value;
      const bossSelectorValue = document.getElementById('bossSelector').value;
      const minHours = parseInt(document.getElementById('minRespawnHour').value) || 0;
      const minMinutes = parseInt(document.getElementById('minRespawnMinute').value) || 0;
      const maxHours = parseInt(document.getElementById('maxRespawnHour').value) || 0;
      const maxMinutes = parseInt(document.getElementById('maxRespawnMinute').value) || 0;

      if (!repairTimeInput || !bossSelectorValue) {
        alert("è«‹è¼¸å…¥æ­£ç¢ºçš„æ™‚é–“èˆ‡é¸æ“‡ BOSSï¼");
        return;
      }

      const minMs = (minHours * 60 + minMinutes) * 60000;
      const maxMs = (maxHours * 60 + maxMinutes) * 60000;
      const repairTime = new Date(repairTimeInput);
      const resultBody = document.getElementById('resultBody');
      const resultHead = document.getElementById('resultHead');
      const statusMessage = document.getElementById('statusMessage');
      const resultTable = document.getElementById('resultTable');

      // âœ… æ¸…é™¤å…§å®¹èˆ‡ç‹€æ…‹
      resultBody.innerHTML = "";
      resultHead.innerHTML = "";
      statusMessage.innerHTML = "";

      // âœ… æ’å…¥è¡¨é ­ï¼ˆå–® BOSS æ¨¡å¼ï¼‰
      resultHead.innerHTML = `
        <tr>
          <th>ç¬¬ N æ¬¡</th>
          <th>é è¨ˆé‡ç”Ÿé–‹å§‹æ™‚é–“</th>
          <th>é è¨ˆé‡ç”ŸçµæŸæ™‚é–“</th>
        </tr>
      `;

      let baseTime = new Date(repairTime);
      const now = new Date();
      let matchedInterval = null;

      for (let i = 1; i <= 200; i++) {
        const start = new Date(baseTime.getTime() + minMs);
        const end = new Date(baseTime.getTime() + maxMs);

        const row = document.createElement('tr');
        row.innerHTML = `
          <td>ç¬¬ ${i} æ¬¡</td>
          <td>${formatDate(start)}</td>
          <td>${formatDate(end)}</td>
        `;
        resultBody.appendChild(row);

        if (!matchedInterval && now >= start && now <= end) {
          matchedInterval = `âŒ› ç¾åœ¨æ™‚é–“è½åœ¨ç¬¬ ${i} æ¬¡é‡ç”Ÿå€é–“å…§ï¼`;
        }

        baseTime = new Date(baseTime.getTime() + maxMs);
      }

      statusMessage.innerText = matchedInterval || "âš ï¸ ç¾åœ¨æ™‚é–“ä¸åœ¨ä»»ä½•é æ¸¬çš„é‡ç”Ÿå€é–“å…§ã€‚";
      resultTable.style.display = 'table';
    }


    function checkCurrentRespawningBosses() {
      const repairTimeInput = document.getElementById('repairTime').value;
      if (!repairTimeInput) {
        alert("è«‹å…ˆè¼¸å…¥ä¼ºæœå™¨é–‹æ©Ÿæ™‚é–“ï¼");
        return;
      }

      const repairTime = new Date(repairTimeInput);
      const now = new Date();

      const resultBody = document.getElementById('resultBody');
      const resultHead = document.getElementById('resultHead');
      const statusMessage = document.getElementById('statusMessage');
      const resultTable = document.getElementById('resultTable');

      // âœ… æ¸…é™¤å…ˆå‰å…§å®¹
      resultBody.innerHTML = "";
      resultHead.innerHTML = "";
      statusMessage.innerHTML = "";

      // âœ… æ’å…¥è¡¨é ­ï¼ˆå¤š BOSS æ¨¡å¼ï¼‰
      resultHead.innerHTML = `
        <tr>
          <th>BOSS åç¨±</th>
          <th>ç¬¬ N æ¬¡</th>
          <th>é è¨ˆé‡ç”Ÿé–‹å§‹æ™‚é–“</th>
          <th>é è¨ˆé‡ç”ŸçµæŸæ™‚é–“</th>
        </tr>
      `;

      let hasMatch = false;

      bossList.forEach(boss => {
        const minMs = (boss.minHour * 60 + boss.minMinute) * 60000;
        const maxMs = (boss.maxHour * 60 + boss.maxMinute) * 60000;

        let baseTime = new Date(repairTime);

        for (let i = 1; i <= 200; i++) {
          const start = new Date(baseTime.getTime() + minMs);
          const end = new Date(baseTime.getTime() + maxMs);

          if (now >= start && now <= end) {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${boss.name}</td>
              <td>ç¬¬ ${i} æ¬¡</td>
              <td>${formatDate(start)}</td>
              <td>${formatDate(end)}</td>
            `;
            resultBody.appendChild(row);
            hasMatch = true;
            break;
          }

          baseTime = new Date(baseTime.getTime() + maxMs);
        }
      });

      if (!hasMatch) {
        const row = document.createElement('tr');
        row.innerHTML = `<td colspan="4">ç›®å‰æ™‚é–“ä¸åœ¨ä»»ä½• BOSS çš„é‡ç”Ÿå€é–“å…§ã€‚</td>`;
        resultBody.appendChild(row);
      }

      resultTable.style.display = 'table';
    }




    function formatDate(date) {
      const y = date.getFullYear();
      const m = String(date.getMonth() + 1).padStart(2, '0');
      const d = String(date.getDate()).padStart(2, '0');
      const h = String(date.getHours()).padStart(2, '0');
      const min = String(date.getMinutes()).padStart(2, '0');
      return `${y}/${m}/${d} ${h}:${min}`;
    }

  </script>
</body>
</html>
