<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>æˆæ¬Šç¢¼</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", "å¾®è»Ÿæ­£é»‘é«”", Arial, sans-serif;
            padding: 20px;
            background-color: rgba(100, 181, 246, 0.3); /* æ·¡è—è‰²é€æ˜ */
            color: white;
            text-align: center;
        }

        h1 {
            color: #2196F3; /* è—è‰² */
        }

        p {
            margin-bottom: 10px;
        }

        .token-display {
            background-color: #ffeb3b; /* é»ƒè‰²èƒŒæ™¯ */
            color: black;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .token-display:hover {
            background-color: #fbc02d; /* æ·±ä¸€é»çš„é»ƒè‰² */
        }

        .message-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #2196F3; /* è—è‰²é‚Šæ¡† */
            border-radius: 5px;
            background-color: #1e88e5; /* æ·±è—è‰²èƒŒæ™¯ */
            color: white;
            display: none; /* åˆå§‹éš±è— */
        }
        .message-container.active {
            display: block; /* é¡¯ç¤ºè¨Šæ¯ */
        }
        .message-container p {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>æˆæ¬Šç¢¼é é¢</h1>
    <p><span class="token-display" id="copyToken">ğŸ‘†é»æ“Šè¤‡è£½æˆæ¬Šç¢¼</span></p>
    <p id="token-display"></p> <!-- é¡¯ç¤º token çš„å…ƒç´  -->
    <div class="message-container" id="messageContainer">
        <p id="systemMessage"></p> <!-- ç³»çµ±è¨Šæ¯ -->
    </div>

    <script>
        // Parse the token from URL hash if it exists
        window.addEventListener('load', () => {
            const hash = window.location.hash;
            window.location.hash = '';  // Remove token from URL
            if (hash && hash.includes('access_token')) {
                const token = new URLSearchParams(hash.slice(1)).get('access_token');
                // åœ¨é é¢ä¸Šé¡¯ç¤º token
                const tokenDisplay = document.getElementById('token-display');
                tokenDisplay.style.color = 'blue'; // è¨­ç½®æ–‡å­—é¡è‰²ç‚ºè—è‰²
                tokenDisplay.innerText = 'ğŸ”‘æˆæ¬Šç¢¼: ' + token;

                // é»é¸ token é€²è¡Œè¤‡è£½
                const copyToken = document.getElementById('copyToken');
                copyToken.addEventListener('click', () => {
                    // å‰µå»ºä¸€å€‹è‡¨æ™‚çš„ textarea å…ƒç´ 
                    const textarea = document.createElement('textarea');
                    textarea.value = token;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);

                    // é¡¯ç¤ºè¤‡è£½å®Œæˆçš„æç¤º
                    //copyToken.innerText = 'å·²è¤‡è£½: ' + token;
                    copyToken.innerText = 'âœ…å·²è¤‡è£½';
                    setTimeout(() => {
                        copyToken.innerText = 'ğŸ‘†é»æ“Šè¤‡è£½æˆæ¬Šç¢¼';
                    }, 1000); // 1 ç§’å¾Œé‚„åŸé¡¯ç¤º
                });

                console.log('access_token:', token);

            }
        });
    </script>
</body>
</html>
