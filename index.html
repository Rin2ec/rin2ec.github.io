<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ä¼Šä¼ŠéŠæˆ²å°å¹«æ‰‹æˆæ¬Šç¢¼</title>
    <style>
        body {
            font-family: "Microsoft JhengHei";
            padding: 20px;
            background-color: rgba(100, 181, 246, 0.3); /* æ·¡è—è‰²é€æ˜ */
            color: white;
            text-align: center;
        }

        h1 {
            color: #2196F3; /* è—è‰² */
        }

        p {
            margin-bottom: 10px;
            font-size: 26px; /* è¨­å®šå­—é«”å¤§å°ç‚º10px */
        }

        .token-display {
            background-color: #ffeb3b; /* é»ƒè‰²èƒŒæ™¯ */
            color: black;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .token-display:hover {
            background-color: #fbc02d; /* æ·±ä¸€é»çš„é»ƒè‰² */
        }

        .token-display:active {
            background-color: #ffeb3b;
            background-size: 100%;
            transition: background 0s;
            transform: scale(0.85);
        }


        .message-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #2196F3; /* è—è‰²é‚Šæ¡† */
            border-radius: 5px;
            background-color: #1e88e5; /* æ·±è—è‰²èƒŒæ™¯ */
            color: white;
            display: none; /* åˆå§‹éš±è— */
            font-weight: bold;
        }
        .message-container.active {
            display: block; /* é¡¯ç¤ºè¨Šæ¯ */
            font-size: 20px; /* è¨­å®šå­—é«”å¤§å°ç‚º10px */
        }
        .message-container p {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>ä¼Šä¼ŠéŠæˆ²å°å¹«æ‰‹æˆæ¬Šç¢¼</h1>
    <p><span class="token-display" id="copyToken">ğŸ‘†é»æ“Šè¤‡è£½æˆæ¬Šç¢¼</span></p>
    <p id="token-display"></p> <!-- é¡¯ç¤º token çš„å…ƒç´  -->
    <div class="message-container" id="messageContainer">
        <p id="systemMessage"></p> <!-- ç³»çµ±è¨Šæ¯ -->
    </div>

    <script>
        // Parse the token from URL hash if it exists
        window.addEventListener('load', () => {
            const hash = window.location.hash;
            window.location.hash = '';  // Remove token from URL
            if (hash && hash.includes('access_token')) {
                const token = new URLSearchParams(hash.slice(1)).get('access_token') || '';
                // åœ¨é é¢ä¸Šé¡¯ç¤º token
                const tokenDisplay = document.getElementById('token-display');
                tokenDisplay.style.color = 'blue'; // è¨­ç½®æ–‡å­—é¡è‰²ç‚ºè—è‰²
                tokenDisplay.innerText = 'ğŸ”‘æˆæ¬Šç¢¼: ' + token;

                // é»é¸ token é€²è¡Œè¤‡è£½
                const copyToken = document.getElementById('copyToken');
                copyToken.addEventListener('click', () => {
                    //console.log('access_token:', token);
                    // å‰µå»ºä¸€å€‹è‡¨æ™‚çš„ textarea å…ƒç´ 
                    const textarea = document.createElement('textarea');
                    textarea.value = token;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);

                    // é¡¯ç¤ºè¤‡è£½å®Œæˆçš„æç¤º
                    //copyToken.innerText = 'å·²è¤‡è£½: ' + token;
                    copyToken.innerText = 'âœ…è¤‡è£½æˆåŠŸ âš™ï¸è«‹å›åˆ°é¦–é è²¼ä¸ŠåŠå„²å­˜ğŸ’¾';
                    setTimeout(() => {
                        copyToken.innerText = 'ğŸ‘†é»æ“Šè¤‡è£½æˆæ¬Šç¢¼';
                    }, 5000); // 5 ç§’å¾Œé‚„åŸé¡¯ç¤º
                });


            }else{
                    const copyToken = document.getElementById('copyToken');
                    copyToken.innerText = 'âš ï¸éŒ¯èª¤ï¼šç„¡æˆæ¬Šç¢¼';
                    console.log('no token');
            }
        });
    </script>
</body>
</html>
